<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>表单ProForm | Cool UI</title>
    <meta name="description" content="UI library for Coollu Frontend Team">
    <link rel="stylesheet" href="/cool-ui/assets/style.1f88aaf0.css">
    <link rel="modulepreload" href="/cool-ui/assets/app.b68fc08d.js">
    <link rel="modulepreload" href="/cool-ui/assets/guide_intro.md.afb448e2.lean.js">
    
    <meta name="twitter:title" content="表单ProForm | Cool UI">
  <meta property="og:title" content="表单ProForm | Cool UI">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><!--[--><div class="theme"><header class="nav-bar" data-v-98f9ad16><div class="sidebar-button" data-v-98f9ad16><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/cool-ui/" aria-label="Cool UI, back to home" data-v-98f9ad16 data-v-510a3d95><img class="logo" src="/cool-ui/logo.png" alt="Logo" data-v-510a3d95> Cool UI</a><div class="flex-grow" data-v-98f9ad16></div><div class="nav" data-v-98f9ad16><nav class="nav-links" data-v-98f9ad16 data-v-3e8bb03e><!--[--><div class="item" data-v-3e8bb03e><div class="nav-link" data-v-3e8bb03e data-v-f5a4c54c><a class="item active" href="/cool-ui/guide/" data-v-f5a4c54c>文档 <!----></a></div></div><div class="item" data-v-3e8bb03e><div class="nav-link" data-v-3e8bb03e data-v-f5a4c54c><a class="item" href="/cool-ui/components/" data-v-f5a4c54c>组件 <!----></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-34329fec><nav class="nav-links nav" data-v-34329fec data-v-3e8bb03e><!--[--><div class="item" data-v-3e8bb03e><div class="nav-link" data-v-3e8bb03e data-v-f5a4c54c><a class="item active" href="/cool-ui/guide/" data-v-f5a4c54c>文档 <!----></a></div></div><div class="item" data-v-3e8bb03e><div class="nav-link" data-v-3e8bb03e data-v-f5a4c54c><a class="item" href="/cool-ui/components/" data-v-f5a4c54c>组件 <!----></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-34329fec><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="/cool-ui/guide/">快速上手</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/cool-ui/guide/intro">培训文档</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#proform测试页面">ProForm测试页面</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#水平表单">水平表单</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#垂直表单">垂直表单</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#行内表单">行内表单</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#行内栅格表单">行内栅格表单</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#固定-label-宽度">固定 label 宽度</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#form-本身的-props">Form 本身的 Props</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#内置的控件类型">内置的控件类型</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#输入框-input">输入框 Input</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#数字输入框-inputnumber">数字输入框 InputNumber</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#文本框-input-textarea">文本框 Input.TextArea</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#搜索框-input-search">搜索框 Input.Search</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#密码框-input-password">密码框 Input.Password</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#下拉框-select">下拉框 Select</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#参数字典下拉框-params">参数字典下拉框 Params</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#控件属性-事件">控件属性/事件</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#控件插槽">控件插槽</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#其他">其他</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#表单默认值和表单回写">表单默认值和表单回写</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#表单校验">表单校验</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#表单提交">表单提交</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#一份数据，三处共用">一份数据，三处共用</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#查询表单部分">查询表单部分</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#toolbar-部分">Toolbar 部分</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#table-部分">Table 部分</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#pagination-部分">Pagination 部分</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#其他可预见的插槽">其他可预见的插槽</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#prepend-插槽">prepend 插槽</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#toolbar-插槽">toolbar 插槽</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#before-table-插槽">before-table 插槽</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#default-插槽">default 插槽</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#非分页情况">非分页情况</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/cool-ui/guide/faq">FAQ</a><!----></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7b1d4fe4><div class="container" data-v-7b1d4fe4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7b1d4fe4><div><p>今天主要介绍的是我们的 ProCode 体系。对于中后台来说，最常见的业务场景就是表单，表格。</p><p>对于 ProForm 和 ProTable，其本质上是基于 ant-design-vue 的 Form 和 Table 组件的二次封装。在设计上，ProForm 和 ProTable 并没有裁剪掉 Form 和 Table 的任何能力，而是一种适合我们业务的能力加强。 <img src="https://cdn.nlark.com/yuque/0/2021/png/319482/1630400378198-6af54e91-e67f-44d6-87f3-90edf1f25253.png#clientId=u71b57f67-cc91-4&amp;from=paste&amp;height=314&amp;id=u52772866&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=314&amp;originWidth=522&amp;originalType=binary&amp;ratio=1&amp;size=21132&amp;status=done&amp;style=none&amp;taskId=u49088061-7e6c-433a-b340-574d7fbbbfe&amp;width=522" alt=""></p><h1 id="表单proform" tabindex="-1">表单ProForm <a class="header-anchor" href="#表单proform" aria-hidden="true">#</a></h1><p>其中，表单会有水平表单，垂直表单，行内表单，行内栅格表单等几种呈现方式。</p><h2 id="proform测试页面" tabindex="-1">ProForm测试页面 <a class="header-anchor" href="#proform测试页面" aria-hidden="true">#</a></h2><p>路由：<code>/test</code>，比如 <code>http://localhost:8081/test</code></p><h2 id="水平表单" tabindex="-1">水平表单 <a class="header-anchor" href="#水平表单" aria-hidden="true">#</a></h2><p>一行一个，就是经典的水平表单场景，也是 ProForm 默认的行为。 <img src="https://cdn.nlark.com/yuque/0/2021/png/319482/1630395916969-e51b9a05-f7ef-4d15-b013-f6ca7a644070.png#clientId=u71b57f67-cc91-4&amp;from=paste&amp;height=666&amp;id=u96e94f2e&amp;margin=%5Bobject%20Object%5D&amp;name=image-20210831135043554.png&amp;originHeight=666&amp;originWidth=593&amp;originalType=binary&amp;ratio=1&amp;size=17433&amp;status=done&amp;style=none&amp;taskId=ued18b351-2ee7-47df-98f6-b5a905774aa&amp;width=593" alt=""> 如果不希望表单控件占满一行，拉得太长，可以从两个方面去考虑。</p><ul><li>第一，限制 form 的宽度，比如通过 css 指定一个 width。</li><li>第二，通过属性 <code>:auto-fill=&quot;false&quot;</code> 控制，维持控件原有尺寸。实际上看起来效果并不好（如下图所示），所以，如有必要，推荐还是用第一种比较好！</li></ul><p><img src="https://cdn.nlark.com/yuque/0/2021/png/319482/1630396084684-9cda8dc4-eb04-40b1-9b8b-4c1c003396c7.png#clientId=u71b57f67-cc91-4&amp;from=paste&amp;height=525&amp;id=udc3cbd5e&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=525&amp;originWidth=412&amp;originalType=binary&amp;ratio=1&amp;size=14442&amp;status=done&amp;style=none&amp;taskId=u606d18c9-2b4c-4e9c-8103-3059462c07e&amp;width=412" alt=""></p><h2 id="垂直表单" tabindex="-1">垂直表单 <a class="header-anchor" href="#垂直表单" aria-hidden="true">#</a></h2><p>垂直表单其实只是水平表单的一种表现形式，具体表现为 label 和 content 的上下排列。涉及的属性是<code>layout=&quot;vertical&quot;</code>。</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/319482/1630396203816-780365f1-dc01-4d07-872e-ee968a7bbb46.png#clientId=u71b57f67-cc91-4&amp;from=paste&amp;height=449&amp;id=u342a0b28&amp;margin=%5Bobject%20Object%5D&amp;name=image-20210831152618768.png&amp;originHeight=449&amp;originWidth=534&amp;originalType=binary&amp;ratio=1&amp;size=8601&amp;status=done&amp;style=none&amp;taskId=u13a90b31-818c-4804-b10c-aa6cffa7f27&amp;width=534" alt=""></p><h2 id="行内表单" tabindex="-1">行内表单 <a class="header-anchor" href="#行内表单" aria-hidden="true">#</a></h2><p>普通的行内表单是指表单按盒子模型排列，宽度不够时自动换行。需要用到属性<code>layout=&quot;inline&quot;</code> + <code>:use-grid=&quot;false&quot;</code> + <code>:auto-fill=&quot;false&quot;</code>。展现形式如下： <img src="https://cdn.nlark.com/yuque/0/2021/png/319482/1630400620393-86afb8ab-bbd3-46dc-810c-284c05bb6703.png#clientId=u71b57f67-cc91-4&amp;from=paste&amp;height=479&amp;id=u07da6fc6&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=479&amp;originWidth=1118&amp;originalType=binary&amp;ratio=1&amp;size=46047&amp;status=done&amp;style=none&amp;taskId=u0fa99c1c-b980-478e-a52a-8cd975c9d38&amp;width=1118" alt=""> 虽然实现了行内效果，但是整体上看起来也是比较丑的，是<strong>不推荐使用</strong>的一种配置！</p><h2 id="行内栅格表单" tabindex="-1">行内栅格表单 <a class="header-anchor" href="#行内栅格表单" aria-hidden="true">#</a></h2><p>目前来说，针对行内表单场景，我们一般倾向于使用栅格表单，就是常见的 Row + Col 布局，支持响应式，看起来会更加整洁！涉及的属性是<code>layout=&quot;inline&quot;</code>。 <img src="https://cdn.nlark.com/yuque/0/2021/png/319482/1630400691409-e5a1566e-be2b-495f-a9e6-3f2f7395da24.png#clientId=u71b57f67-cc91-4&amp;from=paste&amp;height=434&amp;id=uce5e523d&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=434&amp;originWidth=1167&amp;originalType=binary&amp;ratio=1&amp;size=39512&amp;status=done&amp;style=none&amp;taskId=u2cd0a207-29b7-49aa-9357-7501295b591&amp;width=1167" alt=""></p><h2 id="固定-label-宽度" tabindex="-1">固定 label 宽度 <a class="header-anchor" href="#固定-label-宽度" aria-hidden="true">#</a></h2><p>不同的表单项通常 label 的宽度是不一样的，但是为了保证视觉上的效果，我们会将 label 宽度统一，这里用到的是属性<code>label-width</code>，配置示例如下：</p><p><code>label-width=&quot;120px&quot;</code></p><h2 id="form-本身的-props" tabindex="-1">Form 本身的 Props <a class="header-anchor" href="#form-本身的-props" aria-hidden="true">#</a></h2><p>如本文开头所说，Form 本身的能力并没有被裁剪，原本支持的属性和事件依然得到支持。就比如前面一直提到的 layout 属性，其本身就是一个 Form 组件的属性，而不是 ProForm 提供的，只是 ProForm 在这个基础上去做了更多的判断和逻辑组合，以提供更强大的能力！</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/319482/1630401024467-3718023d-4dd0-4bc3-945d-f9c1e59246b5.png#clientId=u71b57f67-cc91-4&amp;from=paste&amp;height=667&amp;id=u30d9aa11&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=667&amp;originWidth=929&amp;originalType=binary&amp;ratio=1&amp;size=39292&amp;status=done&amp;style=none&amp;taskId=ua75369a2-49d7-4847-96df-fbc72fd44ee&amp;width=929" alt=""></p><h2 id="内置的控件类型" tabindex="-1">内置的控件类型 <a class="header-anchor" href="#内置的控件类型" aria-hidden="true">#</a></h2><p>针对常见的业务类型，ProForm 内置支持了很多表单控件，通过<code>valueType</code>来控制渲染什么控件，具体解释如下。对于特殊的未支持的类型，也可以根据业务需要，通过 <code>customRenderFormItem</code> 自行渲染！</p><h3 id="输入框-input" tabindex="-1">输入框 Input <a class="header-anchor" href="#输入框-input" aria-hidden="true">#</a></h3><p><code>valueType=&quot;input&quot;</code>，也是默认行为，不传<code>valueType</code>也会渲染普通的 Input 输入框。 <img src="https://cdn.nlark.com/yuque/0/2021/png/319482/1630401293970-2c903942-728a-4c13-934a-2cafa08edce4.png#clientId=u71b57f67-cc91-4&amp;from=paste&amp;height=61&amp;id=u3412e9f0&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=61&amp;originWidth=357&amp;originalType=binary&amp;ratio=1&amp;size=1733&amp;status=done&amp;style=none&amp;taskId=ua6532666-209c-42cb-84ec-bdee24c910c&amp;width=357" alt=""></p><h3 id="数字输入框-inputnumber" tabindex="-1">数字输入框 InputNumber <a class="header-anchor" href="#数字输入框-inputnumber" aria-hidden="true">#</a></h3><p><code>valueType=&quot;inputNumber&quot;</code></p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/319482/1630401323076-648afb7d-6bbe-4213-9a1e-82afd66e1df1.png#clientId=u71b57f67-cc91-4&amp;from=paste&amp;height=51&amp;id=u0d2830da&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=51&amp;originWidth=355&amp;originalType=binary&amp;ratio=1&amp;size=1925&amp;status=done&amp;style=none&amp;taskId=u11f6d272-121a-4738-b4fc-c039c30d0d3&amp;width=355" alt=""></p><h3 id="文本框-input-textarea" tabindex="-1">文本框 Input.TextArea <a class="header-anchor" href="#文本框-input-textarea" aria-hidden="true">#</a></h3><p><code>valueType=&quot;textarea&quot;</code><img src="https://cdn.nlark.com/yuque/0/2021/png/319482/1630401552055-dfd4c460-7f42-4ca7-aaf4-eb0554e0a240.png#clientId=u71b57f67-cc91-4&amp;from=paste&amp;height=96&amp;id=uaa081653&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=96&amp;originWidth=341&amp;originalType=binary&amp;ratio=1&amp;size=2220&amp;status=done&amp;style=none&amp;taskId=uff9a19ba-205e-481b-83ac-37ec2a36111&amp;width=341" alt=""></p><h3 id="搜索框-input-search" tabindex="-1">搜索框 Input.Search <a class="header-anchor" href="#搜索框-input-search" aria-hidden="true">#</a></h3><p><code>valueType=&quot;inputSearch&quot;</code><img src="https://cdn.nlark.com/yuque/0/2021/png/319482/1630401540226-87a42523-f7db-48fc-be1c-99bc806ea088.png#clientId=u71b57f67-cc91-4&amp;from=paste&amp;height=60&amp;id=u940187e2&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=60&amp;originWidth=354&amp;originalType=binary&amp;ratio=1&amp;size=2683&amp;status=done&amp;style=none&amp;taskId=u61fbf94a-bed5-4a82-85c7-f4ee71c0a9c&amp;width=354" alt=""></p><h3 id="密码框-input-password" tabindex="-1">密码框 Input.Password <a class="header-anchor" href="#密码框-input-password" aria-hidden="true">#</a></h3><p><code>valueType=&quot;inputPassword&quot;</code><img src="https://cdn.nlark.com/yuque/0/2021/png/319482/1630401773120-a8fdfa3b-a3ac-4a6a-bc04-c74b7fc1a098.png#clientId=u71b57f67-cc91-4&amp;from=paste&amp;height=86&amp;id=ub3e57ef8&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=86&amp;originWidth=338&amp;originalType=binary&amp;ratio=1&amp;size=2571&amp;status=done&amp;style=none&amp;taskId=ua383035f-2247-4674-bc56-248ddb6984c&amp;width=338" alt=""></p><h3 id="下拉框-select" tabindex="-1">下拉框 Select <a class="header-anchor" href="#下拉框-select" aria-hidden="true">#</a></h3><p><code>valueType=&quot;select&quot;</code><img src="https://cdn.nlark.com/yuque/0/2021/png/319482/1630401883525-aced3566-18ce-4844-b8d9-8a0c92e467e4.png#clientId=u71b57f67-cc91-4&amp;from=paste&amp;height=329&amp;id=u6b983311&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=329&amp;originWidth=332&amp;originalType=binary&amp;ratio=1&amp;size=18344&amp;status=done&amp;style=none&amp;taskId=u0b0f40a7-7dee-4355-a166-c8ef827cfb8&amp;width=332" alt=""></p><p>对于下拉框，我们要关注的是：</p><ol><li>数据从哪来？</li><li>展示什么？</li><li>给后端什么数据？</li></ol><p>对于第一个问题，数据源是通过<code>selectDataSource</code>提供。比如绑定一个<code>selectDataSource: userList.value</code>。</p><p>对于第二个问题，也是我们经常要思考的，下拉的文本展示用哪个字段呢，是用姓名，还是身份证，还是其他的，这个是可以通过<code>selectOption</code>来配置的。比如：</p><div class="language-"><pre><code>selectOption: {
	// 展示 realName 字段
	label: &#39;realName&#39;
}
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>对于第三个问题，我们要清楚的是，一般来说，后端并不需要UI展示层面的名称，而是需要存储 <code>id</code>, <code>code</code> 之类的字段，比如<code>userId</code>, <code>paramCode</code>。所以，我们需要指定一个<strong>值</strong>使用的字段。</p><div class="language-"><pre><code>selectOption: {
	// 值取id字段
	key: &#39;id&#39;
}
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="参数字典下拉框-params" tabindex="-1">参数字典下拉框 Params <a class="header-anchor" href="#参数字典下拉框-params" aria-hidden="true">#</a></h3><p><code>valueType=&quot;params&quot;</code><img src="https://cdn.nlark.com/yuque/0/2021/png/319482/1630402706147-65151622-66f7-4a59-b11e-b9f04d8cbe3c.png#clientId=u71b57f67-cc91-4&amp;from=paste&amp;height=236&amp;id=u20243d34&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=236&amp;originWidth=413&amp;originalType=binary&amp;ratio=1&amp;size=10693&amp;status=done&amp;style=none&amp;taskId=u4a04526c-84c6-4708-b420-d09d492924e&amp;width=413" alt=""></p><p>参数字典下拉框是一种特殊的下拉框业务类型。</p><p>因为下拉框场景很多，不可能所有的下拉场景都设计单独的DB表去维护，然后提供类似于<code>xxxService.find</code>之类的接口供前端查询。参数字典的出现就是为了满足这类通用的<strong>下拉，枚举</strong>场景。</p><p>参数字典下拉框需要通过配置<code>paramCode</code>去匹配数据。</p><p>当然，仅仅有<code>paramCode</code>也是不够的，你必须提供参数字典的数据源，这个数据源一般是通过<code>listByCodeList</code>接口查询得到，涉及的通用代码是：</p><div class="language-"><pre><code>const { params, trigger: triggerForParams } = useFetchParams(
	&quot;TMC.TRIGGER_STATUS,TMC.EXECUTOR_BLOCK_STRATEGY,TMC.EXECUTOR_ROUTE_STRATEGY,TMC.GLUE_TYPE&quot;
);
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>取到数据<code>params</code>后，需要绑定到 ProForm 组件上。</p><div class="language-"><pre><code>&lt;cl-pro-form :params=&quot;params&quot; /&gt;
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="控件属性-事件" tabindex="-1">控件属性/事件 <a class="header-anchor" href="#控件属性-事件" aria-hidden="true">#</a></h2><p>单纯地把表单控件渲染出来，仍然不能满足各种各样的业务，所以，对于控件的属性和事件，我们也必须全部支持。我们可以通过 props 属性进行属性和事件的传递，其中事件是以<code>onXXX</code>形式给出。</p><p>对于事件来说，我们劫持了组件的原生事件，在回调中第一个参数位置提供了表单对象<code>formModel</code>，用以支持个性化的业务逻辑。</p><div class="language-"><pre><code>{
  title: &quot;超时时间&quot;,
  dataIndex: &quot;executorTimeout&quot;,
  valueType: &quot;inputNumber&quot;,
  rule: [REQUIRED_VALIDATOR_BLUR_FOR_NUMBER],
  props: {
  	placeholder: &quot;任务超时时间，单位秒，大于零时生效&quot;,
    // 劫持了组件原生事件，原生事件支持的回调参数都往后推一个位置
    onChange: (formModel, value) =&gt; console.log(value)
  },
},
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>另外，props 也支持函数类型，适用于根据 formModel 动态设置 props 的场景。</p><div class="language-"><pre><code>props: (formModel) =&gt; {
  return {
    disabled: formModel.otherProp === true,
  };
},
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="控件插槽" tabindex="-1">控件插槽 <a class="header-anchor" href="#控件插槽" aria-hidden="true">#</a></h2><p>对于支持插槽的表单控件，我们也提供了配置能力。属性名是 <code>v-slots</code>，保持与 Vue JSX Slot 一致。 <img src="https://cdn.nlark.com/yuque/0/2021/png/319482/1630415909842-d4cf40fe-51cd-442b-b76d-06bed18f3983.png#clientId=u71b57f67-cc91-4&amp;from=paste&amp;height=605&amp;id=ud117c0cd&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=605&amp;originWidth=818&amp;originalType=binary&amp;ratio=1&amp;size=47427&amp;status=done&amp;style=none&amp;taskId=u5ac2972a-1ab0-47dd-bff4-4e2fae2316c&amp;width=818" alt=""></p><h2 id="其他" tabindex="-1">其他 <a class="header-anchor" href="#其他" aria-hidden="true">#</a></h2><p>所有内置控件就不一一说明了，可以关注 <code>pro.ts</code> 文件中的 <code>ValueType</code> 类型。 <img src="https://cdn.nlark.com/yuque/0/2021/png/319482/1630402830876-9d84f706-f830-4670-90d3-fbae56246b90.png#clientId=u71b57f67-cc91-4&amp;from=paste&amp;height=373&amp;id=u64352398&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=373&amp;originWidth=218&amp;originalType=binary&amp;ratio=1&amp;size=11432&amp;status=done&amp;style=none&amp;taskId=u30f457f2-5c2d-4458-873c-869d293aff6&amp;width=218" alt=""></p><p>如果需要定制样式，可以自己加 class 去实现，不再赘述！</p><h2 id="表单默认值和表单回写" tabindex="-1">表单默认值和表单回写 <a class="header-anchor" href="#表单默认值和表单回写" aria-hidden="true">#</a></h2><p>表单默认值是指，即便表单啥也没操作，我们可以根据需要，先填充一个默认值，这个是通过属性<code>defaultValue</code>实现的。 <img src="https://cdn.nlark.com/yuque/0/2021/png/319482/1630404824802-db619bbd-c153-4d46-8c98-d48deb1c4551.png#clientId=u71b57f67-cc91-4&amp;from=paste&amp;height=150&amp;id=u21f9095c&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=150&amp;originWidth=426&amp;originalType=binary&amp;ratio=1&amp;size=8279&amp;status=done&amp;style=none&amp;taskId=uea4ff0c8-145e-4990-a44b-c63204766c0&amp;width=426" alt=""> 表单回写不同于默认值，是整个表单对象的回写操作，一般是指从后端取到数据后，把相应的值回填到表单。这个是通过<code>write-back-form</code>属性控制的。具体用法可以在项目里面搜一搜！</p><div class="language-"><pre><code>&lt;cl-pro-form
  ref=&quot;proFormRef&quot;
  :write-back-form=&quot;writeBackForm&quot;
  :form-items=&quot;formItems&quot;
  :params=&quot;params&quot;
  :on-submit=&quot;onSubmit&quot;
  @cancel=&quot;onCancel&quot;
/&gt;
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="表单校验" tabindex="-1">表单校验 <a class="header-anchor" href="#表单校验" aria-hidden="true">#</a></h2><p>表单校验首先需要配置规则，这个是通过<code>rule</code>配置项实现的。我们把一些常用的配置做成常量，方便快速引用，比如<code>REQUIRED_VALIDATOR_BLUR</code>是用于在控件失焦时触发必填校验。</p><p>如果需要自定义校验规则，也可以自己写，这个和 ant-design-vue 的表单校验规则是完全兼容的。</p><div class="language-"><pre><code>rule: [
	{
  	trigger: &#39;change&#39;,
    max: 10,
    message: &#39;超长了！&#39;
  }
]
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><img src="https://cdn.nlark.com/yuque/0/2021/png/319482/1630459591224-d10ae293-ba8a-478c-b22a-862a143ac939.png#clientId=u71b57f67-cc91-4&amp;from=paste&amp;height=790&amp;id=uc2ae1ee3&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=790&amp;originWidth=929&amp;originalType=binary&amp;ratio=1&amp;size=44051&amp;status=done&amp;style=none&amp;taskId=u0e018fa0-fb4b-4283-995e-81e0a25ae92&amp;width=929" alt=""></p><p>默认情况下，会在点击保存按钮时自动进行表单校验。</p><p>实际上，有时候我们会通过 <code>:use-buttons=&quot;false&quot;</code> 隐藏掉内置的表单按钮，根据自己的业务需要自行提交表单。这个时候，仍然可能需要校验表单后再调用提交接口，那么怎么使用呢？</p><p>我们可以通过 ref 取到 ProForm 组件的引用，通过 validate 方法触发校验。</p><div class="language-"><pre><code>const customSubmit = async () =&gt; {
	await proFormRef.value.validate();
  // 校验通过，看情况balabala写一堆代码
  // 取到formModel对象
  const formModel = proFormRef.value.getProcessedFormModel()
  // 也可以考虑进行对象加工
  const params = {
  	...formModel,
    xxxId: someId
  }
  // 然后调接口进行提交
  await xxxService.xxxMethod(params)
}
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="表单提交" tabindex="-1">表单提交 <a class="header-anchor" href="#表单提交" aria-hidden="true">#</a></h2><p>ProForm 内置了两个按钮。</p><ul><li>点击取消按钮时会触发<code>cancel</code>事件，绑定的事件处理函数 <code>onCancel</code>可以根据需要去写逻辑，比如关闭弹出框，返回上一个页面等等。</li><li>保存按钮是用于表单提交的，在设计上不是通过事件触发机制完成，而是需要通过<code>on-submit</code>属性传递一个异步函数，在这个异步函数中做表单提交操作。</li></ul><div class="language-"><pre><code>// onSubmit 能接收到 formModel 参数
const onSubmit = async (formModel: PlainObject) =&gt; {
	// 在这里可以进行数据处理，表单提交操作
}
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h1 id="表格protable" tabindex="-1">表格ProTable <a class="header-anchor" href="#表格protable" aria-hidden="true">#</a></h1><p>ProTable 的目标并非只是完成一个 table 的展示，而是覆盖 CRUD 场景。 <img src="https://cdn.nlark.com/yuque/0/2021/png/319482/1630403464939-b70aad36-1996-4975-ab5a-38ef8ffb9af5.png#clientId=u71b57f67-cc91-4&amp;from=paste&amp;height=806&amp;id=ucdf516d8&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=806&amp;originWidth=1019&amp;originalType=binary&amp;ratio=1&amp;size=42490&amp;status=done&amp;style=none&amp;taskId=ud6322b99-f11f-4f65-ba88-ac19eb6ddbd&amp;width=1019" alt=""></p><h2 id="一份数据，三处共用" tabindex="-1">一份数据，三处共用 <a class="header-anchor" href="#一份数据，三处共用" aria-hidden="true">#</a></h2><p>ProTable 的 <code>columns</code> 配置影响三处，分别是查询表单，表格，详情。某些情况，某个字段并不需要在这三处都展示，这个可以通过 <code>hideInXXX</code> 来配置。</p><div class="language-"><pre><code>{
	// 在查询表单中不显示
	hideInSearch: true,
  // 在Table中不显示
  hideInTable: true,
  // 在详情中不显示
  hideInDescriptions: true
}
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="查询表单部分" tabindex="-1">查询表单部分 <a class="header-anchor" href="#查询表单部分" aria-hidden="true">#</a></h2><p>可以看到，查询表单部分也就是一个表单，按我们的设计，自然是充分利用 ProForm。</p><p>如果不需要展示查询表单，可以通过<code>:use-header=&quot;false&quot;</code>控制。</p><h2 id="toolbar-部分" tabindex="-1">Toolbar 部分 <a class="header-anchor" href="#toolbar-部分" aria-hidden="true">#</a></h2><p>toolbar 默认是一些辅助性工具，但是你可以通过插槽 <code>toolbar</code> 去渲染更多的内容，比如各种功能性按钮。 <img src="https://cdn.nlark.com/yuque/0/2021/png/319482/1630461602611-2ed7c4d0-38db-4d8c-9894-dd512a785ba7.png#clientId=u71b57f67-cc91-4&amp;from=paste&amp;height=442&amp;id=u238d6af8&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=442&amp;originWidth=303&amp;originalType=binary&amp;ratio=1&amp;size=19798&amp;status=done&amp;style=none&amp;taskId=uff6195ba-6904-4c62-bcb7-520ebbeb55c&amp;width=303" alt=""> 如果不需要展示 Toolbar ，可以通过<code>:use-toolbar=&quot;false&quot;</code>控制。</p><h2 id="table-部分" tabindex="-1">Table 部分 <a class="header-anchor" href="#table-部分" aria-hidden="true">#</a></h2><p>table 的展示区域其实比表单更简单，主要就是文本的展示，但是也有这么几种基本类型，可以通过 <code>columnType</code> 配置。</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/319482/1630461809772-3ac57006-85c0-4ada-82f6-31120911382f.png#clientId=u71b57f67-cc91-4&amp;from=paste&amp;height=44&amp;id=ufc5fc817&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=44&amp;originWidth=641&amp;originalType=binary&amp;ratio=1&amp;size=3856&amp;status=done&amp;style=none&amp;taskId=uc1d300ac-bb21-430c-8488-329556d56dc&amp;width=641" alt=""></p><ul><li>params：这个和表单类似，不过是优先寻找行数据中的 <code>${dataIndex}ByTran</code>，如果找不到，需要配合<code>paramCode</code>去做一个前端的翻译工作。</li><li>translate：纯翻译功能，适用于一些<code>id</code>翻译的场景，直接找<code>${dataIndex}ByTran</code>，找不到会默认展示<code>dataIndex</code></li><li>actions：操作列，这个不多说了，参考现有代码看就行。</li><li>text：默认值，不做任何加工处理，直接取<code>dataIndex</code>能索引到的值。</li><li>link：链接类型。</li><li>image：图片。</li></ul><p>有特殊渲染需求的，当然还是要靠<code>customRender</code>实现。</p><p>PS: <code>dataIndex</code>支持多级索引，比如：</p><div class="language-"><pre><code>{
  title: &quot;当前节点&quot;,
  dataIndex: &quot;currentTasks[0].name&quot;,
  width: &quot;120px&quot;,
  hideInSearch: true,
},
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="pagination-部分" tabindex="-1">Pagination 部分 <a class="header-anchor" href="#pagination-部分" aria-hidden="true">#</a></h2><p>可以通过 <code>customPagination</code> 传递一些配置，具体见 <a href="https://2x.antdv.com/components/pagination-cn#API" target="_blank" rel="noopener noreferrer">Pagination API</a> 。</p><p>如果不需要展示 Pagination，可以通过<code>:use-pagination=&quot;false&quot;</code>控制。</p><h2 id="其他可预见的插槽" tabindex="-1">其他可预见的插槽 <a class="header-anchor" href="#其他可预见的插槽" aria-hidden="true">#</a></h2><p>实际开发过程中，难免会遇到这里加一点，那里加一点的情况。所以，对于一些特殊的位置，我们会设计一些插槽，以满足定制开发场景。</p><h3 id="prepend-插槽" tabindex="-1">prepend 插槽 <a class="header-anchor" href="#prepend-插槽" aria-hidden="true">#</a></h3><p>位置上是在查询表单上方。类似这种： <img src="https://cdn.nlark.com/yuque/0/2021/png/319482/1630463190933-573da392-1dd8-4f67-96bd-75bd614622ed.png#clientId=u71b57f67-cc91-4&amp;from=paste&amp;height=534&amp;id=uabb7d0fc&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=534&amp;originWidth=1085&amp;originalType=binary&amp;ratio=1&amp;size=28547&amp;status=done&amp;style=none&amp;taskId=u260a1c7d-1921-48b2-92b1-21fbfcdad6c&amp;width=1085" alt=""></p><h3 id="toolbar-插槽" tabindex="-1">toolbar 插槽 <a class="header-anchor" href="#toolbar-插槽" aria-hidden="true">#</a></h3><p>这个在 toolbar 部分已经说过了。</p><h3 id="before-table-插槽" tabindex="-1">before-table 插槽 <a class="header-anchor" href="#before-table-插槽" aria-hidden="true">#</a></h3><p>位置上是在 table 上方，toolbar 下方。</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/319482/1630463365269-664b1ec1-cf99-43fe-b387-b250b3e77f2e.png#clientId=u71b57f67-cc91-4&amp;from=paste&amp;height=439&amp;id=u3e33006f&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=439&amp;originWidth=829&amp;originalType=binary&amp;ratio=1&amp;size=19408&amp;status=done&amp;style=none&amp;taskId=uabd745d7-25c2-4aa5-8085-4ff5f428634&amp;width=829" alt=""></p><h3 id="default-插槽" tabindex="-1">default 插槽 <a class="header-anchor" href="#default-插槽" aria-hidden="true">#</a></h3><p>紧跟 table 后面，其实主要是给弹出层用的插槽位。 <img src="https://cdn.nlark.com/yuque/0/2021/png/319482/1630463025073-12d00cfd-c8c1-4014-901f-a7c302d281f6.png#clientId=u71b57f67-cc91-4&amp;from=paste&amp;height=364&amp;id=ue172a134&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=364&amp;originWidth=819&amp;originalType=binary&amp;ratio=1&amp;size=37534&amp;status=done&amp;style=none&amp;taskId=u671d6f55-8e75-4aec-abcb-cdf98bd0b45&amp;width=819" alt=""></p><h2 id="非分页情况" tabindex="-1">非分页情况 <a class="header-anchor" href="#非分页情况" aria-hidden="true">#</a></h2><p>ProTable 默认情况下会认为这是一个分页模型。实际上，有些时候我们不需要分页模型，仅仅需要展示一个 List Table。这个时候，可以通过上述配置隐藏该隐藏的部分，然后通过 <code>:use-provided=&quot;true&quot;</code> 以及 <code>:provided-data=&quot;yourDataList&quot;</code> 来实现自定义的数据展示。具体可以在项目中搜索一下相关的案例。</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/319482/1630463478009-65df4677-620c-4d6c-86f0-13fa5b8f4c6e.png#clientId=u89fdadd4-fc54-4&amp;from=paste&amp;height=303&amp;id=ud6664fa1&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=303&amp;originWidth=997&amp;originalType=binary&amp;ratio=1&amp;size=23389&amp;status=done&amp;style=none&amp;taskId=u01b45245-b8de-4987-9583-bda629d2922&amp;width=997" alt=""></p></div></div><footer class="page-footer" data-v-7b1d4fe4 data-v-04c668bc><div class="edit" data-v-04c668bc><div class="edit-link" data-v-04c668bc data-v-6bd76a75><!----></div></div><div class="updated" data-v-04c668bc><!----></div></footer><div class="next-and-prev-link" data-v-7b1d4fe4 data-v-37c0523f><div class="container" data-v-37c0523f><div class="prev" data-v-37c0523f><a class="link" href="/cool-ui/guide/" data-v-37c0523f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-37c0523f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-37c0523f>快速上手</span></a></div><div class="next" data-v-37c0523f><a class="link" href="/cool-ui/guide/faq" data-v-37c0523f><span class="text" data-v-37c0523f>FAQ</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-37c0523f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--><!--]--><!--]--><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"components_avatar_index.md\":\"1e2c70cb\",\"components_button_index.md\":\"1099bca9\",\"components_index.md\":\"3648f014\",\"guide_faq.md\":\"9001c7b0\",\"guide_index.md\":\"d614d7e8\",\"guide_intro.md\":\"afb448e2\",\"index.md\":\"d85e63a9\"}")</script>
    <script type="module" async src="/cool-ui/assets/app.b68fc08d.js"></script>
    
  </body>
</html>